<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú—ñ–π —Å–∞–π—Ç –∑ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—î—é</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∞–¥–º—ñ–Ω–∞ –≤ –ø—Ä–∞–≤–æ–º—É –∫—É—Ç—ñ -->
        {% if current_user.role == 'admin' %}
        <div class="admin-corner-info">
            <span class="admin-crown">üëë</span>
            <span class="admin-text">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä</span>
        </div>
        {% endif %}
        <header class="header">
            <div class="header-content">
                <h1>
                    {% if user_logged_in %}
                        –í—ñ—Ç–∞—î–º–æ, {{ current_user.fullName }}! üëã
                    {% else %}
                        –í—ñ—Ç–∞—î–º–æ –Ω–∞ –Ω–∞—à–æ–º—É —Å–∞–π—Ç—ñ! üéâ
                    {% endif %}
                </h1>
                <nav class="nav">
                    <a href="/" class="nav-link active">üè† –ì–æ–ª–æ–≤–Ω–∞</a>
                    {% if user_logged_in %}
                        <a href="/newsfeed" class="nav-link">üì∞ –°—Ç—Ä—ñ—á–∫–∞</a>
                        <a href="/logout" class="logout-btn">üö™ –í–∏–π—Ç–∏</a>
                    {% else %}
                        <span class="guest-text">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—å –∞–±–æ —É–≤—ñ–π–¥—ñ—Ç—å</span>
                    {% endif %}
                </nav>
            </div>
        </header>

        {% if not user_logged_in %}
        <section class="registration-section">
            <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
            <form method="POST" action="/register">
                <div class="form-group">
                    <label for="fullName">–Ü–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ:</label>
                    <input type="text" id="fullName" name="fullName" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email –∞–¥—Ä–µ—Å–∞:</label>
                    <input type="email" id="email" name="email" placeholder="example@email.com" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É:</label>
                    <input type="tel" id="phone" name="phone" placeholder="+380001112233" required>
                </div>
                
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (–º—ñ–Ω. 6 —Å–∏–º–≤–æ–ª—ñ–≤)" required minlength="6">
                </div>
                
                <div class="form-group">
                    <label for="confirm_password">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è:</label>
                    <input type="password" id="confirm_password" name="confirm_password" placeholder="–ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å" required>
                </div>
                
                <button type="submit" class="submit-btn">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
            </form>
        </section>

        <section class="login-section">
            <h2>–í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <form method="POST" action="/login">
                <div class="form-group">
                    <label for="loginEmail">Email –∞–¥—Ä–µ—Å–∞:</label>
                    <input type="email" id="loginEmail" name="email" placeholder="example@email.com" required>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="loginPassword" name="password" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à –ø–∞—Ä–æ–ª—å" required>
                </div>
                
                <button type="submit" class="login-btn">–£–≤—ñ–π—Ç–∏</button>
            </form>
        </section>
        {% endif %}

        <!-- –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        {% if user_logged_in and current_user.role == 'admin' %}
        <section class="users-section">
            <h2>üë• –£—á–∞—Å–Ω–∏–∫–∏ —Å–ø—ñ–ª—å–Ω–æ—Ç–∏ (–ê–¥–º—ñ–Ω)</h2>
            <div class="users-container">
                {% for user in users %}
                    <div class="user-card">
                        <div class="user-name">üë§ {{ user.fullName }}</div>
                        <div class="user-date">üìÖ {{ user.registration_date.strftime('%d.%m.%Y %H:%M') }}</div>
                        <div class="user-email">üìß {{ user.email }}</div>
                        <div class="user-phone">üìû {{ user.phone }}</div>
                        {% if user.role == 'admin' %}
                            <div class="user-role">üëë –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        {% else %}
                            <div class="user-role">üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</div>
                        {% endif %}
                    </div>
                {% else %}
                    <div class="empty-state">
                        <p>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</p>
                        <p>–ë—É–¥—å—Ç–µ –ø–µ—Ä—à–∏–º!</p>
                    </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}

        {% if user_logged_in %}
        {% if current_user.role == 'admin' %}
        <section class="stats-section">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-number">{{ users|length }}</div>
                    <div class="stat-label">–í—Å—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ today_users }}</div>
                    <div class="stat-label">–°—å–æ–≥–æ–¥–Ω—ñ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ</div>
                </div>
            </div>
        </section>
        {% endif %}
        {% endif %}

        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="message success">
                    {{ messages[0] }}
                </div>
            {% endif %}
        {% endwith %}
    </div>
</body>
</html>